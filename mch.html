<script>
    jQuery(document).ready( function() {

//    getreport();

    });
</script>
<script type="text/javascript" src="../dhis-web-commons/oust/oust.js?_rev=20029"></script>
<script type="text/javascript" src="javascript/dataCompleteness.js?_rev=20029"></script>
<script type="text/javascript" src="../api/files/script?_rev=20029"></script>
<script>
    var currentPeriodOffset = 0;
    var periodTypeFactory = new PeriodType();


    function displayPeriods(){
        var periodType = $( "#periodType" ).val();
        var periods = periodTypeFactory.get( periodType ).generatePeriods(currentPeriodOffset );
        periods = periodTypeFactory.reverse( periods );
        periods = periodTypeFactory.filterFuturePeriodsExceptCurrent( periods );
        $( "#periodId" ).removeAttr( "disabled" );
        clearListById( "periodId" );

        for ( i in periods )
        {
            addOptionById( "periodId", periods[i].iso, periods[i].name );
        }
    }

    function displayNextPeriods(){
        if ( currentPeriodOffset < 0 ) // Cannot display future periods
        {
            currentPeriodOffset++;
            displayPeriods();
        }
    }

    function displayPreviousPeriods(){
        currentPeriodOffset--;
        displayPeriods();
    }
    var dateFormat = 'yy-mm-dd';
    dhis2.period.format = 'yyyy-mm-dd';
    dhis2.period.calendar = $.calendars.instance('gregorian');
    dhis2.period.generator = new dhis2.period.PeriodGenerator( dhis2.period.calendar, dhis2.period.format );
    dhis2.period.picker = new dhis2.period.DatePicker( dhis2.period.calendar, dhis2.period.format );
</script>

<style type="text/css">.container-content{
    overflow-x: auto;
}
</style>
<p><span style="font-size:12px;">
<style type="text/css">table.tableizer-table {
    font-size: 12px;
    border: 1px solid #CCC;
    font-family: Arial, Helvetica, sans-serif;
}
.tableizer-table td {
    padding: 4px;
    margin: 3px;
    border: 1px solid #CCC;
}
.tableizer-table th {
    background-color: #104E8B;
    color: #FFF;
    font-weight: bold;
}
.tableizer-table span {
    width: 1em;
    word-wrap: break-word;
}
</style>
<script type="text/javascript">
    function getreport() {
        var orgUnit = dhis2.report.organisationUnit;
        var period = $( "#periodId" ).val();
        $("#ou").html(orgUnit.name);
        $("#reportPeriod").html(period);
        console.log(dhis2.report);

        $.get("../api/analytics.json?dimension=pe:"+period+"&dimension=dx:eF6i9grD5ya;XoOttIwbO6x;pTTwyI8nWDV;jDOCGV6pDJp;RNnHOQ6Uebl;gjRFKCKRY8E;JxrzCSuNroP" +
            "&filter=ou:"+orgUnit.id+"&displayProperty=NAME&hierarchyMeta=true&showHierarchy=true&&tableLayout=true",
            function( json1 ) {
                if((json1.rows).length > 0){
                    for(var i = 0; i < (json1.rows).length; i++){
                        if(json1.rows[i][2]!=""){
                            $("span#"+json1.rows[i][0]).parent().css("text-align", "center");
                            $("span#"+json1.rows[i][0]).css("font-weight", "bold");
                            $( "#"+json1.rows[i][0] ).html( json1.rows[i][2] );

                        } else {
                            $( "#"+json1.rows[i][0] ).html("0");
                        }
                    }
                }else {
                    alert("No performance data available for selected period");
                }

            } );

        $.get("../api/analytics.json?dimension=pe:"+period+"&dimension=dx:J7T6ltujYx7;hA56P2gM6Uf;G6TbhAofOJg;Gg5QNicshDD;ST9KsMP3aOy;mbY9ZLZ2rxK" +
            "&filter=ou:"+orgUnit.id+"&displayProperty=NAME&hierarchyMeta=true&showHierarchy=true&&tableLayout=true",
            function( json2 ) {
                if((json2.rows).length > 0){
                    for(var i = 0; i < (json2.rows).length; i++){
                        if(json2.rows[i][2]!=""){
                            $("span#"+json2.rows[i][0]).parent().css("text-align", "center");
                            $("span#"+json2.rows[i][0]).css("font-weight", "bold");
                            $( "#"+json2.rows[i][0] ).html( json2.rows[i][2] );

                        } else {
                            $( "#"+json2.rows[i][0] ).html("0");
                        }
                    }
                }else {
                    alert("No target data available for selected period");
                }

            } );

        $.get("../api/analytics.json?dimension=pe:"+period+"&dimension=dx:w3CeTx2p1t3;W9OAqfwD3oF;" +
            "CPYl88f37sp;XAx0illPRMQ;pt5lAxR5R88;PyqDjxBYx9P&filter=ou:"+orgUnit.id+"&displayProperty=NAME&hierarchyMeta=true&showHierarchy=true&&tableLayout=true",
            function( json ) {
                if((json.rows).length > 0){
                    for(var i = 0; i < (json.rows).length; i++){
                        if(json.rows[i][2]!=""){
                            $("span#"+json.rows[i][0]).css("color", "white");
                            $("span#"+json.rows[i][0]).parent().css("text-align", "center");
                            $("span#"+json.rows[i][0]).css("font-weight", "bold");
                            $( "#"+json.rows[i][0] ).html( json.rows[i][2] );
                            if(json.rows[i][2] < 25.0){
                                $("span#"+json.rows[i][0]).parent().css("background-color", "red");
                            }else if(json.rows[i][2] < 50.0){
                                $("span#"+json.rows[i][0]).parent().css("background-color", "yellow");
                                $("span#"+json.rows[i][0]).css("color", "black");
                            }else if(json.rows[i][2] < 75.0){
                                $("span#"+json.rows[i][0]).parent().css("background-color", "green");
                            }else {
                                $("span#"+json.rows[i][0]).parent().css("background-color", "blue");
                            }

                        } else {
                            $( "#"+json.rows[i][0] ).html("0");
                            $("span#"+json.rows[i][0]).parent().css("background-color", "red");
                        }
                    }
                }else {
                    alert("No data available for selected period");
                }

            } );

    };

</script> </span></p>

<h3><span style="font-size:14px;">Maternal and Child Health Performance</span></h3>

<h3><span id="ou" style="font-size:14px;"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span id="reportPeriod" style="font-size:14px;">&nbsp;</span> Report</h3>

<div class="inputSection" style="padding-bottom: 10px;">
    <label>Report period</label><br>
    <select id="periodType" name="periodType" style="width:174px" onchange="displayPeriods()">
        <option value="">[ Select period type ]</option>
        <option value="Daily">Daily</option>
        <option value="Weekly">Weekly</option>
        <option value="Monthly">Monthly</option>
        <option value="BiMonthly">Bimonthly</option>
        <option value="Quarterly">Quarterly</option>
        <option value="SixMonthly">Six-monthly</option>
        <option value="SixMonthlyApril">Six-monthly April</option>
        <option value="Yearly">Yearly</option>
        <option value="FinancialApril">Financial-April</option>
        <option value="FinancialJuly">Financial-July</option>
        <option value="FinancialOct">Financial-Oct</option>
    </select>
    <input type="button" style="width:75px" value="Prev year" onclick="displayPreviousPeriods()" />
    <input type="button" style="width:75px" value="Next year" onclick="displayNextPeriods()" /><br>

    <select id="periodId" name="periodId" style="width:330px" disabled="disabled">
    </select>
</div>
<p></p>
<p></p>
<button VALUE="submit" ONCLICK="getreport()">Submit</button>
<p></p>
<p></p>

<div>
    <div class="left" id="tabs">
        <div class="container-content" id="tab-1" style="width:80%">
            <table class="tableizer-table">
                <thead>
                <tr class="tableizer-firstrow">
                    <td style="background-color: rgb(16, 78, 139); text-align: center;"><span style="font-size:12px;"><strong><span style="font-size:16px;"><span style="color: rgb(255, 255, 224);">Indicator</span></span></strong></span></td>
                    <td style="background-color: rgb(16, 78, 139); text-align: center;"><span style="font-size:12px;"><strong><span style="font-size:16px;"><span style="color: rgb(255, 255, 224);">Performance</span></span></strong></span></td>
                    <td style="background-color: rgb(16, 78, 139); text-align: center;"><span style="font-size:12px;"><strong><span style="font-size:16px;"><span style="color: rgb(255, 255, 224);">Target</span></span></strong></span></td>
                    <td style="background-color: rgb(16, 78, 139); text-align: center;"><span style="font-size:12px;"><strong><span style="font-size:16px;"><span style="color: rgb(255, 255, 224);">% Achievement</span></span></strong></span></td>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><span style="font-size:12px;">Number of living children Under 12 months</span></td>
                    <td><span style="font-size:12px;">&nbsp;</span></td>
                    <td><span style="font-size:12px;">&nbsp;</span></td>
                    <td><span style="font-size:12px;"></span></td>
                </tr>
                <tr>
                    <td><span style="font-size:12px;">Custom: Number of children under five years old with diarrhea who received Oral Rehydration Therapy (ORT), defined as receiving Oral Rehydration Salt (ORS) solution</span></td>
                    <td><span style="font-size:12px;">&nbsp;</span></td>
                    <td><span style="font-size:12px;">&nbsp;</span></td>
                    <td><span style="font-size:12px;"></span></td>
                </tr>
                <tr>
                    <td><span style="font-size:12px;">Cust: Number of children under five years of age who were ill with diarrhea</span></td>
                    <td><span style="font-size:12px;">&nbsp;</span></td>
                    <td><span style="font-size:12px;">&nbsp;</span></td>
                    <td><span style="font-size:12px;"></span></td>
                </tr>
                <tr>
                    <td><span style="font-size:12px;">Custom: Number of USG-supported facilities that provide appropriate life-saving maternity care - BEmONC </span></td>
                    <td><span style="font-size:12px;">&nbsp;</span></td>
                    <td><span style="font-size:12px;">&nbsp;</span></td>
                    <td><span style="font-size:12px;"></span></td>
                </tr>
                <tr>
                    <td><span style="font-size:12px;">Custom: Number of USG-supported facilities that provide appropriate life-saving maternity care - CEmONC</span></td>
                    <td><span style="font-size:12px;">&nbsp;</span></td>
                    <td><span style="font-size:12px;">&nbsp;</span></td>
                    <td><span style="font-size:12px;"></span></td>
                </tr>
                <tr>
                    <td><span style="font-size:12px;">Custom: Number of babies who received postnatal care within two days of childbirth in USG-supported programs</span></td>
                    <td><span style="font-size:12px;">&nbsp;</span></td>
                    <td><span style="font-size:12px;">&nbsp;</span></td>
                    <td><span style="font-size:12px;"></span></td>
                </tr>

                </tbody>
            </table>
        </div>

    </div>
</div>
